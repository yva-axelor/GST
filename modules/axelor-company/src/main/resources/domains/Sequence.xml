<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/domain-models
  https://axelor.com/xml/ns/domain-models/domain-models_6.0.xsd">

  <module name="company" package="com.axelor.company.db"/>
  
  <entity name="Sequence" >
  

	<string name="prefix" title="Prefix" required="true"/>
	<string name="suffix" title="Suffix"/>
	<integer name="padding" title="Padding" min="1" max="10"/>
	<string name="nextNumber" title="Next number">
	<![CDATA[
	
		if (suffix == null) {
			suffix = "";
		}
		
		if (prefix == null) {
			prefix = "";
		}
		
		if (nextNumber == null || nextNumber == "") {
			return String.format("%s%s%s", prefix, "0".repeat(padding - 1) + "1" ,suffix);
		} else {
			Integer seqString = Integer.parseInt(nextNumber.substring(prefix.length(), nextNumber.length() - suffix.length()));
    		String nextDigit = (++seqString).toString();
    		return String.format("%s%s%s", prefix, "0".repeat(padding - nextDigit.length()) + nextDigit, suffix);
		}
	
	]]>
	</string>
	<many-to-one ref="com.axelor.meta.db.MetaModel" name="model" title="Model" required="true"/>
  </entity>
</domain-models>